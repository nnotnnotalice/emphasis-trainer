<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ —É–¥–∞—Ä–µ–Ω–∏—è–º</title>

    <style>
        /* –í—Å–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        :root {
            --primary: #8A8EE9;
            --primary-hover: #7075e2;
            --success: #d6f5d8;
            --error: #ffd9d9;
            --text: #111827;
            --muted: #6B7280;
            --bg: #f5f5f7;
        }

        body {
            font-family: "Nunito", sans-serif;
            background: var(--bg);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .app {
            background: #ffffff;
            padding: 24px 28px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.07);
            max-width: 520px;
            width: 100%;
            position: relative;
        }

        h1 {
            font-size: 24px;
            margin: 0 0 4px;
            text-align: center;
            font-weight: 700;
        }

        .subtitle {
            font-size: 16px;
            color: var(--muted);
            text-align: center;
            margin-bottom: 8px;
            font-weight: 400;
        }

        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .batches-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .batch-card {
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            font-weight: 600;
        }

        .batch-card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .session-counter {
            font-size: 13px;
            color: #777;
            margin-bottom: 8px;
            text-align: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 14px;
            align-items: center;
            margin-bottom: 8px;
            width: 100%;
        }

        .option-btn {
            padding: 16px 18px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-size: 20px;
            text-align: center;
            background: #ffffff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
            transition: transform 0.05s ease, box-shadow 0.05s ease, background 0.1s ease;
            min-width: 70%;
            font-weight: 400;
        }

        .option-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.07);
        }

        .option-btn.correct {
            background: var(--success);
        }

        .option-btn.wrong {
            background: var(--error);
        }

        .option-btn:disabled {
            cursor: default;
            opacity: 0.9;
        }

        .status {
            min-height: 18px;
            font-size: 14px;
            margin-top: 4px;
            text-align: center;
        }

        .status.err {
            color: #c92424;
        }

        .loader-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            z-index: 10;
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            animation: spin 0.8s linear infinite;
        }

        .hidden {
            display: none;
        }

        @keyframes spin {
            0%   { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .pos-choices {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            width: 100%;
        }

        .pos-btn {
            padding: 14px 20px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            background: #b9c2ff;
            color: #1f2455;
            box-shadow: 0 4px 10px rgba(60, 72, 150, 0.25);
            transition: background 0.1s ease, transform 0.05s ease;
            min-width: 70%;
            font-weight: 400;
        }

        .pos-btn:hover {
            background: #a6b1ff;
            transform: translateY(-1px);
        }

        .summary-congrats {
            text-align: center;
            width: 100%;
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 18px;
        }

        #footerButtons {
            display: flex;
            justify-content: center;
            padding-top: 12px;
        }

        .result-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .result-btn {
            padding: 10px 16px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            background: var(--primary);
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(138, 142, 233, 0.4);
            transition: transform 0.05s ease;
            font-weight: 400;
        }

        .result-btn:hover {
            transform: translateY(-1px);
        }

        .summary-list-wrapper {
            text-align: center;
            margin-top: 8px;
        }

        .summary-list {
            list-style: none;
            padding-left: 0;
            margin: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px 10px;
        }

        .summary-list li {
            background: #e1f7e7;
            color: #145c2e;
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 15px;
            font-weight: 400;
            min-width: 40%;
            text-align: center;
            box-sizing: border-box;
        }

        .pos-choices {
            display: flex;
            flex-direction: column;
            gap: 12px;
            justify-content: center;
            width: 100%;
            max-height: 300px;
            overflow-y: auto;
        }

        .pos-btn {
            padding: 14px 20px;
            border-radius: 999px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            background: #b9c2ff;
            color: #1f2455;
            box-shadow: 0 4px 10px rgba(60, 72, 150, 0.25);
            transition: background 0.1s ease, transform 0.05s ease;
            width: 100%;
            font-weight: 400;
        }

        .summary-subtitle {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--text);
        }
        
        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }
        
        .back-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }
    </style>
</head>

<body>
    <div class="app">
        <button id="backButton" class="back-btn hidden">‚Üê</button>
        <h1>–¢—Ä–µ–Ω–∞–∂—ë—Ä –ø–æ —É–¥–∞—Ä–µ–Ω–∏—è–º</h1>
        <div id="subtitle" class="subtitle"></div>

        <div class="main">
            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
            <div id="mainInterface">
                <div id="sessionInfo" class="session-counter"></div>
                <div id="batchesSelection" class="hidden">
                    <h3>–í—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä</h3>
                    <div class="batches-grid" id="batchesGrid"></div>
                </div>
                <div id="options" class="options"></div>
                <div id="status" class="status"></div>
                <div id="summary"></div>
            </div>
        </div>

        <div id="footerButtons"></div>
        <div id="loaderOverlay" class="loader-overlay hidden">
            <div class="loader"></div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
        const DELAY_AFTER_CORRECT = 700;
        const DELAY_AFTER_WRONG = 1800;

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        let currentPOS = null;
        let currentBatch = [];
        let currentBatchNumber = null;
        let currentIndex = 0;
        let mistakes = [];
        let lastErrorsForReview = [];
        let answered = false;
        let isReviewMode = false;

        // –î–∞–Ω–Ω—ã–µ —Å–ª–æ–≤ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
        const wordsData = {
            "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ": {
                1: [
                    { correct_word: "–∞—ç—Ä–æ–ø–û—Ä—Ç—ã", wrong_options: "–∞—ç—Ä–æ–ø–æ—Ä—Ç–´" },
                    { correct_word: "–±–ê–Ω—Ç—ã", wrong_options: "–±–∞–Ω—Ç–´" },
                    { correct_word: "–±–û—Ä–æ–¥—É", wrong_options: "–±–æ—Ä–æ–¥–£" },
                    { correct_word: "–±—É—Ö–≥–ê–ª—Ç–µ—Ä–æ–≤", wrong_options: "–±—É—Ö–≥–∞–ª—Ç–µ—Ä–û–≤" },
                    { correct_word: "–≤–µ—Ä–æ–∏—Å–ø–æ–≤–ï–¥–∞–Ω–∏–µ", wrong_options: "–≤–µ—Ä–æ–∏—Å–ø–æ–≤–µ–¥–ê–Ω–∏–µ" },
                    { correct_word: "–≤–æ–¥–æ–ø—Ä–æ–≤–û–¥", wrong_options: "–≤–æ–¥–æ–ø—Ä–û–≤–æ–¥" },
                    { correct_word: "–≥–∞–∑–æ–ø—Ä–æ–≤–û–¥", wrong_options: "–≥–∞–∑–æ–ø—Ä–û–≤–æ–¥" },
                    { correct_word: "–≥—Ä–∞–∂–¥–ê–Ω—Å—Ç–≤–æ", wrong_options: "–≥—Ä–ê–∂–¥–∞–Ω—Å—Ç–≤–æ" },
                    { correct_word: "–¥–µ—Ñ–ò—Å", wrong_options: "–¥–ï—Ñ–∏—Å" },
                    { correct_word: "–¥–µ—à–µ–≤–ò–∑–Ω–∞", wrong_options: "–¥–µ—à–µ–≤–∏–∑–Ω–ê" },
                    { correct_word: "–¥–∏—Å–ø–∞–Ω—Å–ï—Ä", wrong_options: "–¥–∏—Å–ø–ê–Ω—Å–µ—Ä" },
                    { correct_word: "–¥–æ–≥–æ–≤–æ—Ä–Å–Ω–Ω–æ—Å—Ç—å", wrong_options: "–¥–æ–≥–æ–≤–û—Ä–µ–Ω–Ω–æ—Å—Ç—å" },
                    { correct_word: "–¥–æ–∫—É–º–ï–Ω—Ç", wrong_options: "–¥–æ–∫–£–º–µ–Ω—Ç" },
                    { correct_word: "–¥–æ—Å–£–≥", wrong_options: "–¥–û—Å—É–≥" },
                    { correct_word: "–µ—Ä–µ—Ç–ò–∫", wrong_options: "–µ—Ä–ï—Ç–∏–∫" },
                    { correct_word: "–∂–∞–ª—é–∑–ò", wrong_options: "–∂–ê–ª—é–∑–∏" },
                    { correct_word: "–∑–Ω–ê—á–∏–º–æ—Å—Ç—å", wrong_options: "–∑–Ω–∞—á–ò–º–æ—Å—Ç—å" },
                    { correct_word: "–ò–∫—Å—ã", wrong_options: "–∏–∫—Å–´" },
                    { correct_word: "–∫–∞—Ç–∞–ª–û–≥", wrong_options: "–∫–∞—Ç–ê–ª–æ–≥" },
                    { correct_word: "–∫–≤–∞—Ä—Ç–ê–ª", wrong_options: "–∫–≤–ê—Ä—Ç–∞–ª" }
                ],
                2: [
                    { correct_word: "–∫–∏–ª–æ–º–ï—Ç—Ä", wrong_options: "–∫–∏–ª–û–º–µ—Ç—Ä" },
                    { correct_word: "–∫–û–Ω—É—Å–æ–≤", wrong_options: "–∫–æ–Ω—É—Å–û–≤" },
                    { correct_word: "–∫–æ—Ä–´—Å—Ç—å", wrong_options: "–∫–û—Ä—ã—Å—Ç—å" },
                    { correct_word: "–∫—Ä–ê–Ω—ã", wrong_options: "–∫—Ä–∞–Ω–´" },
                    { correct_word: "–∫—Ä–µ–º–ï–Ω—å", wrong_options: "–∫—Ä–ï–º–µ–Ω—å" },
                    { correct_word: "–∫—Ä–µ–º–Ω–Ø", wrong_options: "–∫—Ä–ï–º–Ω—è" },
                    { correct_word: "–ª–ï–∫—Ç–æ—Ä–æ–≤", wrong_options: "–ª–µ–∫—Ç–æ—Ä–û–≤" },
                    { correct_word: "–ª–û–∫—Ç—è", wrong_options: "–ª–æ–∫—Ç–Ø" },
                    { correct_word: "–ª—ã–∂–Ω–Ø", wrong_options: "–ª–´–∂–Ω—è" },
                    { correct_word: "–º–ï—Å—Ç–Ω–æ—Å—Ç–µ–π", wrong_options: "–º–µ—Å—Ç–Ω–æ—Å—Ç–ï–π" },
                    { correct_word: "–Ω–∞–º–ï—Ä–µ–Ω–∏–µ", wrong_options: "–Ω–∞–º–µ—Ä–ï–Ω–∏–µ" },
                    { correct_word: "–Ω–∞—Ä–û—Å—Ç", wrong_options: "–Ω–ê—Ä–æ—Å—Ç" },
                    { correct_word: "–Ω–ï–¥—Ä—É–≥", wrong_options: "–Ω–µ–¥—Ä–£–≥" },
                    { correct_word: "–Ω–µ–¥–£–≥", wrong_options: "–Ω–ï–¥—É–≥" },
                    { correct_word: "–Ω–µ–∫—Ä–æ–ª–û–≥", wrong_options: "–Ω–µ–∫—Ä–û–ª–æ–≥" },
                    { correct_word: "–Ω–ï–Ω–∞–≤–∏—Å—Ç—å", wrong_options: "–Ω–µ–Ω–ê–≤–∏—Å—Ç—å" },
                    { correct_word: "–Ω–µ—Ñ—Ç–µ–ø—Ä–æ–≤–û–¥", wrong_options: "–Ω–µ—Ñ—Ç–µ–ø—Ä–û–≤–æ–¥" },
                    { correct_word: "–Ω–æ–≤–æ—Å—Ç–ï–π", wrong_options: "–Ω–û–≤–æ—Å—Ç–µ–π" },
                    { correct_word: "–Ω–û–≥—Ç—è", wrong_options: "–Ω–æ–≥—Ç–Ø" },
                    { correct_word: "–û—Ç–∑—ã–≤ (–æ –∫–Ω–∏–≥–µ)", wrong_options: "–æ—Ç–∑–´–≤ (–æ –∫–Ω–∏–≥–µ)" }
                ],
                3: [
                    { correct_word: "–æ—Ç–∑–´–≤ (–ø–æ—Å–ª–∞ –∏–∑ —Å—Ç—Ä–∞–Ω—ã)", wrong_options: "–û—Ç–∑—ã–≤ (–ø–æ—Å–ª–∞ –∏–∑ —Å—Ç—Ä–∞–Ω—ã)" },
                    { correct_word: "–û—Ç—Ä–æ—á–µ—Å—Ç–≤–æ", wrong_options: "–æ—Ç—Ä–û—á–µ—Å—Ç–≤–æ" },
                    { correct_word: "–ø–∞—Ä—Ç–ï—Ä", wrong_options: "–ø–ê—Ä—Ç–µ—Ä" },
                    { correct_word: "–ø–æ—Ä—Ç—Ñ–ï–ª—å", wrong_options: "–ø–û—Ä—Ç—Ñ–µ–ª—å" },
                    { correct_word: "–ø–û—Ä—É—á–Ω–∏", wrong_options: "–ø–æ—Ä–£—á–Ω–∏" },
                    { correct_word: "–ø—Ä–∏–¥–ê–Ω–æ–µ", wrong_options: "–ø—Ä–ò–¥–∞–Ω–æ–µ" },
                    { correct_word: "–ø—Ä–∏–∑–´–≤", wrong_options: "–ø—Ä–ò–∑—ã–≤" },
                    { correct_word: "—Å–≤–Å–∫–ª–∞", wrong_options: "—Å–≤–µ–∫–ª–ê" },
                    { correct_word: "—Å–∏—Ä–û—Ç—ã", wrong_options: "—Å–ò—Ä–æ—Ç—ã" },
                    { correct_word: "—Å–æ–∑–´–≤", wrong_options: "—Å–û–∑—ã–≤" },
                    { correct_word: "—Å–æ—Å—Ä–µ–¥–æ—Ç–û—á–µ–Ω–∏–µ", wrong_options: "—Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–ï–Ω–∏–µ" },
                    { correct_word: "—Å—Ä–ï–¥—Å—Ç–≤–∞", wrong_options: "—Å—Ä–µ–¥—Å—Ç–≤–ê" },
                    { correct_word: "—Å—Ç–ê—Ç—É—è", wrong_options: "—Å—Ç–∞—Ç–£—è" },
                    { correct_word: "—Å—Ç–æ–ª–Ø—Ä", wrong_options: "—Å—Ç–û–ª—è—Ä" },
                    { correct_word: "—Ç–∞–º–û–∂–Ω—è", wrong_options: "—Ç–ê–º–æ–∂–Ω—è" },
                    { correct_word: "—Ç–û—Ä—Ç—ã", wrong_options: "—Ç–æ—Ä—Ç–´" },
                    { correct_word: "—Ç–£—Ñ–ª—è", wrong_options: "—Ç—É—Ñ–ª–Ø" },
                    { correct_word: "—Ü–µ–º–ï–Ω—Ç", wrong_options: "—Ü–ï–º–µ–Ω—Ç" },
                    { correct_word: "—Ü–ï–Ω—Ç–Ω–µ—Ä", wrong_options: "—Ü–µ–Ω—Ç–Ω–ï—Ä" },
                    { correct_word: "—Ü–µ–ø–û—á–∫–∞", wrong_options: "—Ü–ï–ø–æ—á–∫–∞" },
                    { correct_word: "—à–ê—Ä—Ñ—ã", wrong_options: "—à–∞—Ä—Ñ–´" },
                    { correct_word: "—à–æ—Ñ–Å—Ä", wrong_options: "—à–û—Ñ–µ—Ä" },
                    { correct_word: "—ç–∫—Å–ø–ï—Ä—Ç", wrong_options: "–≠–∫—Å–ø–µ—Ä—Ç" }
                ]
            },
            "–ü—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∏ –ø—Ä–∏—á–∞—Å—Ç–∏—è": {
                1: [
                    { correct_word: "–±–æ–ª—Ç–ª–ò–≤–∞", wrong_options: "–±–æ–ª—Ç–ª–∏–≤–ê" },
                    { correct_word: "–≤–µ—Ä–Ω–ê", wrong_options: "–≤–ï—Ä–Ω–∞" },
                    { correct_word: "–∑–Ω–ê—á–∏–º—ã–π", wrong_options: "–∑–Ω–∞—á–ò–º—ã–π" },
                    { correct_word: "–∫—Ä–∞—Å–ò–≤–µ–µ", wrong_options: "–∫—Ä–∞—Å–∏–≤–ï–µ" },
                    { correct_word: "–∫–£—Ö–æ–Ω–Ω—ã–π", wrong_options: "–∫—É—Ö–û–Ω–Ω—ã–π" },
                    { correct_word: "–ª–æ–≤–∫–ê", wrong_options: "–ª–û–≤–∫–∞" },
                    { correct_word: "–º–æ–∑–∞–ò—á–Ω—ã–π", wrong_options: "–º–æ–∑–ê–∏—á–Ω—ã–π" },
                    { correct_word: "–æ–ø—Ç–û–≤—ã–π", wrong_options: "–û–ø—Ç–æ–≤—ã–π" },
                    { correct_word: "–ø—Ä–æ–∑–æ—Ä–ª–ò–≤–∞", wrong_options: "–ø—Ä–æ–∑–û—Ä–ª–∏–≤–∞" },
                    { correct_word: "–ø—Ä–æ–∑–æ—Ä–ª–ò–≤—ã–π", wrong_options: "–ø—Ä–æ–∑–û—Ä–ª–∏–≤—ã–π" },
                    { correct_word: "–ø—Ä–æ–∂–û—Ä–ª–∏–≤–∞", wrong_options: "–ø—Ä–æ–∂–æ—Ä–ª–ò–≤–∞" },
                    { correct_word: "—Å–ª–ò–≤–æ–≤—ã–π", wrong_options: "—Å–ª–∏–≤–û–≤—ã–π" },
                    { correct_word: "–¥–æ–≤–µ–∑–Å–Ω–Ω—ã–π", wrong_options: "–¥–æ–≤–ï–∑–µ–Ω–Ω—ã–π" },
                    { correct_word: "–∑–ê–≥–Ω—É—Ç—ã–π", wrong_options: "–∑–∞–≥–Ω–£—Ç—ã–π" },
                    { correct_word: "–∑–ê–Ω—è—Ç—ã–π", wrong_options: "–∑–∞–Ω–Ø—Ç—ã–π" },
                    { correct_word: "–∑–ê–ø–µ—Ä—Ç—ã–π", wrong_options: "–∑–∞–ø–Å—Ä—Ç—ã–π" },
                    { correct_word: "–∑–∞—Å–µ–ª–Å–Ω–Ω—ã–π", wrong_options: "–∑–∞—Å–ï–ª–µ–Ω–Ω—ã–π" },
                    { correct_word: "–∑–∞–Ω—è—Ç–ê", wrong_options: "–∑–ê–Ω—è—Ç–∞" },
                    { correct_word: "–∑–∞—Å–µ–ª–µ–Ω–ê", wrong_options: "–∑–∞—Å–ï–ª–µ–Ω–∞" },
                    { correct_word: "–∫–æ—Ä–º–Ø—â–∏–π", wrong_options: "–∫–û—Ä–º—è—â–∏–π" }
                ],
                2: [
                    { correct_word: "–∫—Ä–æ–≤–æ—Ç–æ—á–ê—â–∏–π", wrong_options: "–∫—Ä–æ–≤–æ—Ç–û—á–∞—â–∏–π" },
                    { correct_word: "–Ω–∞–∂–ò–≤—à–∏–π", wrong_options: "–Ω–ê–∂–∏–≤—à–∏–π" },
                    { correct_word: "–Ω–∞–ª–ò–≤—à–∏–π", wrong_options: "–Ω–ê–ª–∏–≤—à–∏–π" },
                    { correct_word: "–Ω–∞–Ω–Ø–≤—à–∏–π—Å—è", wrong_options: "–Ω–ê–Ω—è–≤—à–∏–π—Å—è" },
                    { correct_word: "–Ω–∞—á–ê–≤—à–∏–π", wrong_options: "–Ω–ê—á–∞–≤—à–∏–π" },
                    { correct_word: "–Ω–ê—á–∞—Ç—ã–π", wrong_options: "–Ω–∞—á–ê—Ç—ã–π" },
                    { correct_word: "–Ω–∏–∑–≤–µ–¥–Å–Ω–Ω—ã–π", wrong_options: "–Ω–∏–∑–≤–ï–¥–µ–Ω–Ω—ã–π" },
                    { correct_word: "–æ–±–ª–µ–≥—á–Å–Ω–Ω—ã–π", wrong_options: "–æ–±–ª–ï–≥—á–µ–Ω–Ω—ã–π" },
                    { correct_word: "–æ–±–æ–¥—Ä–Å–Ω–Ω—ã–π", wrong_options: "–æ–±–û–¥—Ä–µ–Ω–Ω—ã–π" },
                    { correct_word: "–æ–±–æ—Å—Ç—Ä–Å–Ω–Ω—ã–π", wrong_options: "–æ–±–û—Å—Ç—Ä–µ–Ω–Ω—ã–π" },
                    { correct_word: "–æ—Ç–∫–ª—é—á–Å–Ω–Ω—ã–π", wrong_options: "–æ—Ç–∫–ª–Æ—á–µ–Ω–Ω—ã–π" },
                    { correct_word: "–ø–æ–≤—Ç–æ—Ä–Å–Ω–Ω—ã–π", wrong_options: "–ø–æ–≤—Ç–û—Ä–µ–Ω–Ω—ã–π" },
                    { correct_word: "–ø–æ–¥–µ–ª–Å–Ω–Ω—ã–π", wrong_options: "–ø–æ–¥–ï–ª–µ–Ω–Ω—ã–π" },
                    { correct_word: "–ø–æ–Ω–Ø–≤—à–∏–π", wrong_options: "–ø–û–Ω—è–≤—à–∏–π" },
                    { correct_word: "–ø—Ä–ò–Ω—è—Ç—ã–π", wrong_options: "–ø—Ä–∏–Ω–Ø—Ç—ã–π" },
                    { correct_word: "–ø—Ä–∏–Ω—è—Ç–ê", wrong_options: "–ø—Ä–ò–Ω—è—Ç–∞" },
                    { correct_word: "–ø—Ä–∏—Ä—É—á–Å–Ω–Ω—ã–π", wrong_options: "–ø—Ä–∏—Ä–£—á–µ–Ω–Ω—ã–π" },
                    { correct_word: "–ø—Ä–æ–∂–ò–≤—à–∏–π", wrong_options: "–ø—Ä–û–∂–∏–≤—à–∏–π" },
                    { correct_word: "—Å–Ω—è—Ç–ê", wrong_options: "—Å–Ω–Ø—Ç–∞" },
                    { correct_word: "—Å–û–≥–Ω—É—Ç—ã–π", wrong_options: "—Å–æ–≥–Ω–£—Ç—ã–π" },
                    { correct_word: "—É–≥–ª—É–±–ª–Å–Ω–Ω—ã–π", wrong_options: "—É–≥–ª–£–±–ª–µ–Ω–Ω—ã–π" }
                ]
            },
            "–ì–ª–∞–≥–æ–ª—ã": {
                1: [
                    { correct_word: "–±—Ä–∞–ª–ê", wrong_options: "–±—Ä–ê–ª–∞" },
                    { correct_word: "–±—Ä–∞–ª–ê—Å—å", wrong_options: "–±—Ä–ê–ª–∞—Å—å" },
                    { correct_word: "–≤–∑—è–ª–ê", wrong_options: "–≤–∑–Ø–ª–∞" },
                    { correct_word: "–≤–∑—è–ª–ê—Å—å", wrong_options: "–≤–∑–Ø–ª–∞—Å—å" },
                    { correct_word: "–≤–ª–∏–ª–ê—Å—å", wrong_options: "–≤–ª–ò–ª–∞—Å—å" },
                    { correct_word: "–≤–æ—Ä–≤–∞–ª–ê—Å—å", wrong_options: "–≤–æ—Ä–≤–ê–ª–∞—Å—å" },
                    { correct_word: "–≤–æ—Å–ø—Ä–∏–Ω—è–ª–ê", wrong_options: "–≤–æ—Å–ø—Ä–ò–Ω—è–ª–∞" },
                    { correct_word: "–≤–æ—Å–ø—Ä–∏–Ω–Ø—Ç—å", wrong_options: "–≤–æ—Å–ø—Ä–ò–Ω—è—Ç—å" },
                    { correct_word: "–≤–æ—Å—Å–æ–∑–¥–∞–ª–ê", wrong_options: "–≤–æ—Å—Å–æ–∑–¥–ê–ª–∞" },
                    { correct_word: "–≤—Ä—É—á–ò—Ç", wrong_options: "–≤—Ä–£—á–∏—Ç" },
                    { correct_word: "–≥–Ω–∞–ª–ê", wrong_options: "–≥–Ω–ê–ª–∞" },
                    { correct_word: "–≥–Ω–∞–ª–ê—Å—å", wrong_options: "–≥–Ω–ê–ª–∞—Å—å" },
                    { correct_word: "–¥–æ–±—Ä–∞–ª–ê", wrong_options: "–¥–æ–±—Ä–ê–ª–∞" },
                    { correct_word: "–¥–æ–±—Ä–∞–ª–ê—Å—å", wrong_options: "–¥–æ–±—Ä–ê–ª–∞—Å—å" },
                    { correct_word: "–¥–æ–∂–¥–∞–ª–ê—Å—å", wrong_options: "–¥–æ–∂–¥–ê–ª–∞—Å—å" },
                    { correct_word: "–æ–Ω –¥–æ–∑–≤–æ–Ω–ò—Ç—Å—è", wrong_options: "–æ–Ω –¥–æ–∑–≤–û–Ω–∏—Ç—Å—è" },
                    { correct_word: "–¥–æ–∑–ò—Ä–æ–≤–∞—Ç—å", wrong_options: "–¥–æ–∑–∏—Ä–æ–≤–ê—Ç—å" },
                    { correct_word: "–∂–¥–∞–ª–ê", wrong_options: "–∂–¥–ê–ª–∞" },
                    { correct_word: "–∂–∏–ª–û—Å—å", wrong_options: "–∂–ò–ª–æ—Å—å" },
                    { correct_word: "–∑–∞–∫–£–ø–æ—Ä–∏—Ç—å", wrong_options: "–∑–∞–∫—É–ø–û—Ä–∏—Ç—å" }
                ],
                2: [
                    { correct_word: "–∑–ê–Ω—è–ª", wrong_options: "–∑–∞–Ω–Ø–ª" },
                    { correct_word: "–∑–∞–Ω–Ø—Ç—å", wrong_options: "–∑–ê–Ω—è—Ç—å" },
                    { correct_word: "–∑–∞–ø–µ—Ä–ª–ê", wrong_options: "–∑–ê–ø–µ—Ä–ª–∞" },
                    { correct_word: "–∑–∞–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", wrong_options: "–∑–∞–ø–ª–æ–º–±–ò—Ä–æ–≤–∞—Ç—å" },
                    { correct_word: "–∑–∞—â–µ–º–ò—Ç", wrong_options: "–∑–∞—â–ï–º–∏—Ç" },
                    { correct_word: "–∑–≤–∞–ª–ê", wrong_options: "–∑–≤–ê–ª–∞" },
                    { correct_word: "–∑–≤–æ–Ω–ò—Ç", wrong_options: "–∑–≤–û–Ω–∏—Ç" },
                    { correct_word: "–∫–ê—à–ª—è–Ω—É—Ç—å", wrong_options: "–∫–∞—à–ª—è–Ω–£—Ç—å" },
                    { correct_word: "–∫–ª–ê–ª–∞", wrong_options: "–∫–ª–∞–ª–ê" },
                    { correct_word: "–∫–ª–ï–∏—Ç—å", wrong_options: "–∫–ª–µ–ò—Ç—å" },
                    { correct_word: "–∫—Ä–ê–ª–∞—Å—å", wrong_options: "–∫—Ä–∞–ª–ê—Å—å" },
                    { correct_word: "–∫—Ä–æ–≤–æ—Ç–æ—á–ò—Ç", wrong_options: "–∫—Ä–æ–≤–æ—Ç–û—á–∏—Ç" },
                    { correct_word: "–ª–≥–∞–ª–ê", wrong_options: "–ª–≥–ê–ª–∞" },
                    { correct_word: "–ª–∏–ª–ê", wrong_options: "–ª–ò–ª–∞" },
                    { correct_word: "–ª–∏–ª–ê—Å—å", wrong_options: "–ª–ò–ª–∞—Å—å" },
                    { correct_word: "–Ω–∞–≤—Ä–∞–ª–ê", wrong_options: "–Ω–∞–≤—Ä–ê–ª–∞" },
                    { correct_word: "–Ω–∞–¥–µ–ª–ò—Ç", wrong_options: "–Ω–∞–¥–ï–ª–∏—Ç" },
                    { correct_word: "–Ω–∞–¥–æ—Ä–≤–∞–ª–ê—Å—å", wrong_options: "–Ω–∞–¥–æ—Ä–≤–ê–ª–∞—Å—å" },
                    { correct_word: "–Ω–∞–∑–≤–∞–ª–ê—Å—å", wrong_options: "–Ω–∞–∑–≤–ê–ª–∞—Å—å" },
                    { correct_word: "–Ω–∞–∫—Ä–µ–Ω–ò—Ç—Å—è", wrong_options: "–Ω–∞–∫—Ä–ï–Ω–∏—Ç—Å—è" }
                ],
                3: [
                    { correct_word: "–Ω–∞–ª–∏–ª–ê", wrong_options: "–Ω–∞–ª–ò–ª–∞" },
                    { correct_word: "–Ω–∞—Ä–≤–∞–ª–ê", wrong_options: "–Ω–∞—Ä–≤–ê–ª–∞" },
                    { correct_word: "–Ω–∞—á–ê—Ç—å", wrong_options: "–Ω–ê—á–∞—Ç—å" },
                    { correct_word: "–Ω–ê—á–∞–ª", wrong_options: "–Ω–∞—á–ê–ª" },
                    { correct_word: "–æ–±–∑–≤–æ–Ω–ò—Ç", wrong_options: "–æ–±–∑–≤–û–Ω–∏—Ç" },
                    { correct_word: "–æ–±–ª–µ–≥—á–ò—Ç—å", wrong_options: "–æ–±–ª–ï–≥—á–∏—Ç—å" },
                    { correct_word: "–æ–±–ª–µ–≥—á–ò—Ç", wrong_options: "–æ–±–ª–ï–≥—á–∏—Ç" },
                    { correct_word: "–æ–±–ª–∏–ª–ê—Å—å", wrong_options: "–æ–±–ª–ò–ª–∞—Å—å" },
                    { correct_word: "–æ–±–Ω—è–ª–ê—Å—å", wrong_options: "–æ–±–Ω–Ø–ª–∞—Å—å" },
                    { correct_word: "–æ–±–æ–≥–Ω–∞–ª–ê", wrong_options: "–æ–±–æ–≥–Ω–ê–ª–∞" },
                    { correct_word: "–æ–±–æ–¥—Ä–∞–ª–ê", wrong_options: "–æ–±–æ–¥—Ä–ê–ª–∞" },
                    { correct_word: "–æ–±–æ–¥—Ä–ò—Ç—å", wrong_options: "–æ–±–û–¥—Ä–∏—Ç—å" },
                    { correct_word: "–æ–±–æ–¥—Ä–ò—Ç", wrong_options: "–æ–±–û–¥—Ä–∏—Ç" },
                    { correct_word: "–æ–Ω –æ–±–æ–¥—Ä–ò—Ç—Å—è", wrong_options: "–æ–Ω –æ–±–û–¥—Ä–∏—Ç—Å—è" },
                    { correct_word: "–æ–±–æ—Å—Ç—Ä–ò—Ç—å", wrong_options: "–æ–±–û—Å—Ç—Ä–∏—Ç—å" },
                    { correct_word: "–æ–¥–æ–ª–∂–ò—Ç—å", wrong_options: "–æ–¥–û–ª–∂–∏—Ç—å" },
                    { correct_word: "–æ–¥–æ–ª–∂–ò—Ç", wrong_options: "–æ–¥–û–ª–∂–∏—Ç" },
                    { correct_word: "–æ–∑–ª–û–±–∏—Ç—å", wrong_options: "–æ–∑–ª–æ–±–ò—Ç—å" },
                    { correct_word: "–æ–∫–ª–ï–∏—Ç—å", wrong_options: "–æ–∫–ª–µ–ò—Ç—å" },
                    { correct_word: "–æ–∫—Ä—É–∂–ò—Ç", wrong_options: "–æ–∫—Ä–£–∂–∏—Ç" }
                ],
                4: [
                    { correct_word: "–æ–ø–û—à–ª–∏—Ç", wrong_options: "–æ–ø–æ—à–ª–ò—Ç" },
                    { correct_word: "–æ–Ω –æ—Å–≤–ï–¥–æ–º–∏—Ç—Å—è", wrong_options: "–æ–Ω –æ—Å–≤–µ–¥–û–º–∏—Ç—Å—è" },
                    { correct_word: "–æ—Ç–±—ã–ª–ê", wrong_options: "–æ—Ç–±–´–ª–∞" },
                    { correct_word: "–æ—Ç–¥–∞–ª–ê", wrong_options: "–æ—Ç–¥–ê–ª–∞" },
                    { correct_word: "–æ—Ç–∫–£–ø–æ—Ä–∏—Ç—å", wrong_options: "–æ—Ç–∫—É–ø–û—Ä–∏—Ç—å" },
                    { correct_word: "–æ—Ç–æ–∑–≤–∞–ª–ê", wrong_options: "–æ—Ç–æ–∑–≤–ê–ª–∞" },
                    { correct_word: "–æ—Ç–æ–∑–≤–∞–ª–ê—Å—å", wrong_options: "–æ—Ç–æ–∑–≤–ê–ª–∞—Å—å" },
                    { correct_word: "–ø–µ—Ä–µ–∑–≤–æ–Ω–ò—Ç", wrong_options: "–ø–µ—Ä–µ–∑–≤–û–Ω–∏—Ç" },
                    { correct_word: "–ø–µ—Ä–µ–ª–∏–ª–ê", wrong_options: "–ø–µ—Ä–µ–ª–ò–ª–∞" },
                    { correct_word: "–ø–ª–æ–¥–æ–Ω–æ—Å–ò—Ç—å", wrong_options: "–ø–ª–æ–¥–æ–Ω–û—Å–∏—Ç—å" },
                    { correct_word: "–ø–ª–æ–º–±–∏—Ä–æ–≤–ê—Ç—å", wrong_options: "–ø–ª–æ–º–±–ò—Ä–æ–≤–∞—Ç—å" },
                    { correct_word: "–ø–æ–≤—Ç–æ—Ä–ò—Ç", wrong_options: "–ø–æ–≤—Ç–û—Ä–∏—Ç" },
                    { correct_word: "–ø–æ–∑–≤–∞–ª–ê", wrong_options: "–ø–æ–∑–≤–ê–ª–∞" },
                    { correct_word: "–ø–æ–∑–≤–æ–Ω–ò—Ç", wrong_options: "–ø–æ–∑–≤–û–Ω–∏—Ç" },
                    { correct_word: "–ø–æ–ª–∏–ª–ê", wrong_options: "–ø–æ–ª–ò–ª–∞" },
                    { correct_word: "–ø–æ–ª–æ–∂–ò—Ç—å", wrong_options: "–ø–æ–ª–û–∂–∏—Ç—å" },
                    { correct_word: "–ø–æ–ª–æ–∂–ò–ª", wrong_options: "–ø–æ–ª–û–∂–∏–ª" },
                    { correct_word: "–ø–æ–Ω–Ø—Ç—å", wrong_options: "–ø–û–Ω—è—Ç—å" },
                    { correct_word: "–ø–æ–Ω—è–ª–ê", wrong_options: "–ø–û–Ω—è–ª–∞" },
                    { correct_word: "–ø–æ—Å–ª–ê–ª–∞", wrong_options: "–ø–æ—Å–ª–∞–ª–ê" }
                ],
                5: [
                    { correct_word: "–ø—Ä–∏–±–´—Ç—å", wrong_options: "–ø—Ä–ò–±—ã—Ç—å" },
                    { correct_word: "–ø—Ä–ò–±—ã–ª", wrong_options: "–ø—Ä–∏–±–´–ª" },
                    { correct_word: "–ø—Ä–∏–Ω–Ø—Ç—å", wrong_options: "–ø—Ä–ò–Ω—è—Ç—å" },
                    { correct_word: "–ø—Ä–ò–Ω—è–ª", wrong_options: "–ø—Ä–∏–Ω–Ø–ª" },
                    { correct_word: "—Ä–≤–∞–ª–ê", wrong_options: "—Ä–≤–ê–ª–∞" },
                    { correct_word: "—Å–≤–µ—Ä–ª–ò—Ç", wrong_options: "—Å–≤–ï—Ä–ª–∏—Ç" },
                    { correct_word: "—Å–Ω—è–ª–ê", wrong_options: "—Å–Ω–Ø–ª–∞" },
                    { correct_word: "—Å–æ–≤—Ä–∞–ª–ê", wrong_options: "—Å–æ–≤—Ä–ê–ª–∞" },
                    { correct_word: "—Å–æ–∑–¥–∞–ª–ê", wrong_options: "—Å–æ–∑–¥–ê–ª–∞" },
                    { correct_word: "—Å–æ—Ä–≤–∞–ª–ê", wrong_options: "—Å–æ—Ä–≤–ê–ª–∞" },
                    { correct_word: "—Å–æ—Ä–ò—Ç", wrong_options: "—Å–û—Ä–∏—Ç" },
                    { correct_word: "—É–±—Ä–∞–ª–ê", wrong_options: "—É–±—Ä–ê–ª–∞" },
                    { correct_word: "—É–≥–ª—É–±–ò—Ç—å", wrong_options: "—É–≥–ª–£–±–∏—Ç—å" },
                    { correct_word: "—É–∫—Ä–µ–ø–ò—Ç", wrong_options: "—É–∫—Ä–ï–ø–∏—Ç" },
                    { correct_word: "—á–ï—Ä–ø–∞—Ç—å", wrong_options: "—á–µ—Ä–ø–ê—Ç—å" },
                    { correct_word: "—â–µ–º–ò—Ç", wrong_options: "—â–ï–º–∏—Ç" },
                    { correct_word: "—â–Å–ª–∫–∞—Ç—å", wrong_options: "—â–µ–ª–∫–ê—Ç—å" }
                ]
            },
            "–î–µ–µ–ø—Ä–∏—á–∞—Å—Ç–∏—è –∏ –Ω–∞—Ä–µ—á–∏—è": {
                1: [
                    { correct_word: "–∑–∞–∫–£–ø–æ—Ä–∏–≤", wrong_options: "–∑–∞–∫—É–ø–û—Ä–∏–≤" },
                    { correct_word: "–Ω–∞—á–ê–≤", wrong_options: "–Ω–ê—á–∞–≤" },
                    { correct_word: "–Ω–∞—á–ê–≤—à–∏—Å—å", wrong_options: "–Ω–ê—á–∞–≤—à–∏—Å—å" },
                    { correct_word: "–æ—Ç–¥–ê–≤", wrong_options: "–û—Ç–¥–∞–≤" },
                    { correct_word: "–ø–æ–¥–Ω–Ø–≤", wrong_options: "–ø–û–¥–Ω—è–≤" },
                    { correct_word: "–ø–æ–Ω–Ø–≤", wrong_options: "–ø–û–Ω—è–≤" },
                    { correct_word: "–ø—Ä–∏–±–´–≤", wrong_options: "–ø—Ä–ò–±—ã–≤" },
                    { correct_word: "—Å–æ–∑–¥–ê–≤", wrong_options: "—Å–û–∑–¥–∞–≤" },
                    { correct_word: "–≤–û–≤—Ä–µ–º—è", wrong_options: "–≤–æ–≤—Ä–ï–º—è" },
                    { correct_word: "–¥–û–≤–µ—Ä—Ö—É", wrong_options: "–¥–æ–≤–ï—Ä—Ö—É" },
                    { correct_word: "–¥–æ–Ω–ï–ª—å–∑—è", wrong_options: "–¥–û–Ω–µ–ª—å–∑—è" },
                    { correct_word: "–¥–û–Ω–∏–∑—É", wrong_options: "–¥–æ–Ω–ò–∑—É" },
                    { correct_word: "–¥–û—Å—É—Ö–∞", wrong_options: "–¥–æ—Å–£—Ö–∞" },
                    { correct_word: "–∑–ê—Å–≤–µ—Ç–ª–æ", wrong_options: "–∑–∞—Å–≤–µ—Ç–ª–û" },
                    { correct_word: "–∑–ê—Ç–µ–º–Ω–æ", wrong_options: "–∑–∞—Ç–µ–º–Ω–û" },
                    { correct_word: "–∫—Ä–∞—Å–ò–≤–µ–µ", wrong_options: "–∫—Ä–∞—Å–∏–≤–ï–µ" },
                    { correct_word: "–Ω–∞–¥–û–ª–≥–æ", wrong_options: "–Ω–ê–¥–æ–ª–≥–æ" },
                    { correct_word: "–Ω–µ–Ω–∞–¥–û–ª–≥–æ", wrong_options: "–Ω–µ–Ω–ê–¥–æ–ª–≥–æ" }
                ]
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            console.log('=== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ===');
            showMainInterface();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
document.getElementById('backButton').addEventListener('click', goBack);
document.getElementById('backButton').classList.add('hidden');
        }

        function showMainInterface() {
            document.getElementById('mainInterface').classList.remove('hidden');
            document.getElementById('backButton').classList.add('hidden');
            loadPartsOfSpeech();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Å—Ç–µ–π —Ä–µ—á–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
        function loadPartsOfSpeech() {
            setLoading(true);
            document.getElementById('backButton').classList.add('hidden');
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —á–∞—Å—Ç–∏ —Ä–µ—á–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
            const parts = Object.keys(wordsData);
            
            showPOSSelection(parts);
            setLoading(false);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—ã–±–æ—Ä–∞ —á–∞—Å—Ç–∏ —Ä–µ—á–∏
            document.getElementById('backButton').classList.add('hidden');
        }

        function startPOSSelection(pos) {
            currentPOS = pos;
            setLoading(true);
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–≤–∞–¥—Ü–∞—Ç–∫–∏ –¥–ª—è —ç—Ç–æ–π —á–∞—Å—Ç–∏ —Ä–µ—á–∏ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
            const batchNumbers = Object.keys(wordsData[pos]).map(Number).sort((a, b) => a - b);
            
            console.log('–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–≤–∞–¥—Ü–∞—Ç–∫–∏:', batchNumbers);
            showBatchesSelection(pos, batchNumbers);
            setLoading(false);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
          document.getElementById('backButton').classList.remove('hidden');
        }

        function showPOSSelection(parts) {
            currentPOS = null;
            currentBatch = [];
            currentIndex = 0;
            mistakes = [];
            lastErrorsForReview = [];
            isReviewMode = false;
            answered = false;

            setSubtitle("–í—ã–±–µ—Ä–∏ —á–∞—Å—Ç—å —Ä–µ—á–∏");
            setSessionInfo("");
            setStatus("");
            clearOptions();
            clearSummary();
            clearFooterButtons();
            hideBatchesSelection();

            document.getElementById('backButton').classList.add('hidden');

            const box = document.getElementById("options");
            const wrap = document.createElement("div");
            wrap.className = "pos-choices";

            parts.forEach(pos => {
                const b = document.createElement("button");
                b.className = "pos-btn";
                b.textContent = pos;
                b.onclick = () => startPOSSelection(pos);
                wrap.appendChild(b);
            });

            box.appendChild(wrap);
        }

        function showBatchesSelection(pos, batchNumbers) {
            clearOptions();
            clearSummary();
            clearFooterButtons();
            setStatus("");
            setSessionInfo("");
            
            // –£–±–∏—Ä–∞–µ–º "–ß–∞—Å—Ç—å —Ä–µ—á–∏:" –∏–∑ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–∫–∞, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Å—Ç–∏ —Ä–µ—á–∏
            setSubtitle(pos);
            
            const batchesGrid = document.getElementById('batchesGrid');
            batchesGrid.innerHTML = '';
            
            batchNumbers.forEach(batchNum => {
                const card = document.createElement('div');
                card.className = 'batch-card';
                // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä –¥–≤–∞–¥—Ü–∞—Ç–∫–∏
                card.textContent = batchNum;
                card.onclick = () => startBatchSession(pos, batchNum);
                batchesGrid.appendChild(card);
            });
            
            document.getElementById('batchesSelection').classList.remove('hidden');
            document.getElementById('options').classList.add('hidden');
        }

        function startBatchSession(pos, batchNumber) {
            console.log('–ó–∞–ø—É—Å–∫–∞–µ–º –¥–≤–∞–¥—Ü–∞—Ç–∫—É:', pos, batchNumber);
            
            setLoading(true);
            document.getElementById('backButton').classList.remove('hidden');
            
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ–≤–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –Ω—É–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
                const rawWords = wordsData[pos][batchNumber];
                currentBatch = rawWords.map(word => {
                    // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –∏–∑ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤: –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
                    const options = [word.correct_word, word.wrong_options];
                    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã
                    const shuffledOptions = [...options].sort(() => Math.random() - 0.5);
                    const correctIndex = shuffledOptions.indexOf(word.correct_word);
                    
                    return {
                        options: shuffledOptions,
                        correctIndex: correctIndex,
                        correct: word.correct_word
                    };
                });
                
                console.log('–ó–∞–≥—Ä—É–∂–µ–Ω—ã —Å–ª–æ–≤–∞:', currentBatch.length);
                
                if (currentBatch.length === 0) {
                    setStatus("–°–ª–æ–≤–∞ –¥–ª—è —ç—Ç–æ–π –¥–≤–∞–¥—Ü–∞—Ç–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã", "err");
                    setLoading(false);
                    return;
                }
                
                currentPOS = pos;
                currentBatchNumber = batchNumber;
                currentIndex = 0;
                mistakes = [];
                isReviewMode = false;
                answered = false;

                setSubtitle('–í—ã–±–µ—Ä–∏ —Å–ª–æ–≤–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º <strong>–≤–µ—Ä–Ω–æ</strong> –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —É–¥–∞—Ä–µ–Ω–∏–µ');
                clearOptions();
                clearSummary();
                clearFooterButtons();
                setStatus("");
                setSessionInfo("");
                hideBatchesSelection();

                setLoading(false);
                showQuestion();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ–≤:', error);
                setStatus("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ª–æ–≤", "err");
                setLoading(false);
            }
        }

        function showQuestion() {
            clearOptions();
            clearSummary();
            clearFooterButtons();
            setStatus("");

            if (!currentBatch.length || currentIndex >= currentBatch.length) {
                finishSession();
                return;
            }

            const q = currentBatch[currentIndex];
            setSessionInfo(`${currentIndex + 1}/${currentBatch.length}`);

            const box = document.getElementById("options");
            q.options.forEach((opt, idx) => {
                const btn = document.createElement("button");
                btn.className = "option-btn";
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(idx, btn);
                box.appendChild(btn);
            });
        }

        function checkAnswer(index, buttonEl) {
            if (answered || !currentBatch.length || currentIndex >= currentBatch.length) return;
            answered = true;

            const q = currentBatch[currentIndex];
            disableAllOptions();

            if (index === q.correctIndex) {
                buttonEl.classList.add("correct");
                setTimeout(() => {
                    answered = false;
                    currentIndex++;
                    showQuestion();
                }, DELAY_AFTER_CORRECT);
            } else {
                buttonEl.classList.add("wrong");
                highlightCorrect();
                mistakes.push(q);
                setTimeout(() => {
                    answered = false;
                    currentIndex++;
                    showQuestion();
                }, DELAY_AFTER_WRONG);
            }
        }

        function finishSession() {
            clearOptions();
            clearSummary();
            setStatus("");
            setSessionInfo("");
            setSubtitle("");

            const summary = document.getElementById("summary");
            const footer = document.getElementById("footerButtons");
            footer.innerHTML = "";

            const buttonsWrap = document.createElement("div");
            buttonsWrap.className = "result-buttons";

            const errors = mistakes.slice();
            lastErrorsForReview = errors.slice();
            const hasErrors = errors.length > 0;

            if (isReviewMode) {
                if (hasErrors) {
                    const uniqWords = [...new Set(errors.map(q => q.correct))];
                    showErrorSummary(uniqWords, summary);
                    buttonsWrap.appendChild(makeResultBtn("–û—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏", startReviewSession));
                    buttonsWrap.appendChild(makeResultBtn("–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é —á–∞—Å—Ç—å —Ä–µ—á–∏", loadPartsOfSpeech));
                } else {
                    const ok = document.createElement("div");
                    ok.className = "summary-congrats";
                    ok.textContent = "–í—Å—ë –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–æ üèÜ";
                    summary.appendChild(ok);
                    buttonsWrap.appendChild(makeResultBtn("–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é —á–∞—Å—Ç—å —Ä–µ—á–∏", loadPartsOfSpeech));
                }
            } else {
                if (hasErrors) {
                    const uniqWords = [...new Set(errors.map(q => q.correct))];
                    showErrorSummary(uniqWords, summary);
                    buttonsWrap.appendChild(makeResultBtn("–û—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏", startReviewSession));
                    buttonsWrap.appendChild(makeResultBtn("–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é —á–∞—Å—Ç—å —Ä–µ—á–∏", loadPartsOfSpeech));
                } else {
                    const ok = document.createElement("div");
                    ok.className = "summary-congrats";
                    ok.textContent = "–ù–∏ –æ–¥–Ω–æ–π –æ—à–∏–±–∫–∏ üí™üèº";
                    summary.appendChild(ok);
                    buttonsWrap.appendChild(makeResultBtn("–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥—É—é —á–∞—Å—Ç—å —Ä–µ—á–∏", loadPartsOfSpeech));
                }
            }

            footer.appendChild(buttonsWrap);
            isReviewMode = false;
        }

        function startReviewSession() {
            if (!lastErrorsForReview.length) {
                setStatus("–ù–µ—Ç –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ üéâ", "err");
                return;
            }

            isReviewMode = true;
            mistakes = [];
            answered = false;

            const uniqueQuestions = Array.from(
                new Map(lastErrorsForReview.map(q => [q.correct, q])).values()
            );

            currentBatch = uniqueQuestions;
            currentIndex = 0;

            clearOptions();
            clearSummary();
            clearFooterButtons();
            setStatus("");
            setSessionInfo("");
            setSubtitle('–í—ã–±–µ—Ä–∏ —Å–ª–æ–≤–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º <strong>–≤–µ—Ä–Ω–æ</strong> –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–æ —É–¥–∞—Ä–µ–Ω–∏–µ');

            showQuestion();
        }

        // –§—É–Ω–∫—Ü–∏—è "–ù–∞–∑–∞–¥"
       // –§—É–Ω–∫—Ü–∏—è "–ù–∞–∑–∞–¥"
function goBack() {
    if (document.getElementById('batchesSelection').classList.contains('hidden')) {
        // –ï—Å–ª–∏ –º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ–º, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –≤—ã–±–æ—Ä—É –¥–≤–∞–¥—Ü–∞—Ç–æ–∫
        showBatchesSelection(currentPOS, Object.keys(wordsData[currentPOS]).map(Number).sort((a, b) => a - b));
    } else {
        // –ï—Å–ª–∏ –º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å –≤—ã–±–æ—Ä–æ–º –¥–≤–∞–¥—Ü–∞—Ç–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –≤—ã–±–æ—Ä—É —á–∞—Å—Ç–∏ —Ä–µ—á–∏
        loadPartsOfSpeech();
    }
}

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function setSubtitle(html) {
            const el = document.getElementById("subtitle");
            if (!html) {
                el.style.display = "none";
                el.innerHTML = "";
            } else {
                el.style.display = "block";
                el.innerHTML = html;
            }
        }

        function setStatus(msg, type) {
            const el = document.getElementById("status");
            el.textContent = msg || "";
            el.className = "status";
            if (type === "err") el.classList.add("err");
        }

        function setLoading(isLoading) {
            document.getElementById("loaderOverlay").classList.toggle("hidden", !isLoading);
        }

        function clearOptions() {
            document.getElementById("options").innerHTML = "";
        }

        function clearSummary() {
            document.getElementById("summary").innerHTML = "";
        }

        function clearFooterButtons() {
            const footer = document.getElementById("footerButtons");
            if (footer) footer.innerHTML = "";
        }

        function setSessionInfo(text) {
            document.getElementById("sessionInfo").textContent = text || "";
        }

        function disableAllOptions() {
            document.querySelectorAll(".option-btn").forEach(b => (b.disabled = true));
        }

        function highlightCorrect() {
            const q = currentBatch[currentIndex];
            document.querySelectorAll(".option-btn").forEach((b, idx) => {
                if (idx === q.correctIndex) b.classList.add("correct");
            });
        }

        function makeResultBtn(label, handler) {
            const b = document.createElement("button");
            b.className = "result-btn";
            b.textContent = label;
            b.onclick = handler;
            return b;
        }

        function showErrorSummary(words, container) {
            const title = document.createElement("div");
            title.className = "summary-subtitle";
            title.textContent = words.length === 1 ? 
                "–ó–∞–ø–æ–º–Ω–∏, –∫–∞–∫ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—Ç—Å—è —ç—Ç–æ —Å–ª–æ–≤–æ" : 
                "–ó–∞–ø–æ–º–Ω–∏, –∫–∞–∫ –ø—Ä–æ–∏–∑–Ω–æ—Å—è—Ç—Å—è —ç—Ç–∏ —Å–ª–æ–≤–∞";
            container.appendChild(title);

            const wrap = document.createElement("div");
            wrap.className = "summary-list-wrapper";
            const ul = document.createElement("ul");
            ul.className = "summary-list";

            words.forEach(word => {
                const li = document.createElement("li");
                li.textContent = word;
                ul.appendChild(li);
            });

            wrap.appendChild(ul);
            container.appendChild(wrap);
        }

        function hideBatchesSelection() {
            document.getElementById('batchesSelection').classList.add('hidden');
            document.getElementById('options').classList.remove('hidden');
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        window.addEventListener("load", init);
    </script>
</body>
</html>
